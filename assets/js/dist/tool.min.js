function hide(t){$(t).hide()}function show(t){$(t).show()}function elementExists(t){return $(t).length?!0:void 0}var action=function(){var t={};return t.is_json=function(t){try{JSON.parse(t)}catch(e){return!1}return!0},t.getOption=function(t,e){var n="";return n=data.hasOwnProperty(t)?data[t]:e},t.debugData=function(){data.debug===!0&&(console.log("Options JS:"),console.log(data))},t}(),address=function(){var t={};return t.render=function(t,e){$(t+" .url input")[0].value=e},t.update=function(e,n,o){var i=$(e+" iframe")[0].contentWindow.location.href;i!=n&&(t.render(e,i),url[o]=i)},t}(),addresses=function(){var t={};return t.render=function(){for(var t=1;t<url.length;t++)address.render('[data-section="'+t+'"]',url[t])},t.update=function(){for(var t=1;t<url.length;t++)address.update('[data-section="'+t+'"]',url[t],t)},t}(),mem=function(){var t={};return t.init=function(){mem.setMemory(),mem.loadMemory()},t.setLocal=function(t,e){memory[t]=e;var n=JSON.stringify(memory);localStorage.setItem("splitview.memory",n)},t.setMemory=function(){if(localStorage.getItem("splitview.memory")){var t=localStorage.getItem("splitview.memory");action.is_json(t)&&(memory=JSON.parse(t))}},t.getMemory=function(t,e){var n="";return n=memory&&memory.hasOwnProperty(t)?memory[t]:e},t.loadMemory=function(){data.memory===!0?view.setView(mem.getMemory("view","columns")):view.setView(action.getOption("view","columns"))},t}(),data={},iframe_count=0,url=[],panel_state,panel_refreshed=!0,autosync=[];autosync[1]=!1,autosync[2]=!1;var memory={},splitview=function(){var t={};return t.init=function(t){setup.init(t),action.debugData(),iframes.render(),addresses.render(),dropdowns.toggle(),dropdown.eventRemove(),focus.rootsOnLoad(),mem.init(),copy.init(),flip.init(),InputEnter.init(),InputClick.init(),InputHover.init(),Show.init(),Sync.init(),Refresh.init(),AutoSync.init(),Zoom.init(),Free.init(),view.init(),exit.init(),Screen.init(),Width.init()},t}(),AutoSync=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(t){$('[data-section="'+t+'"] .autosync').click(function(e){autosync[t]===!1?($('[data-section="'+t+'"]')[0].setAttribute("data-autosync",""),autosync[t]=!0):($('[data-section="'+t+'"]')[0].removeAttribute("data-autosync"),autosync[t]=!1),dropdown.remove()})},t}(),copy=function(){var t,e,n={};n.init=function(){o()};var o=function(){for(var t=1;t<url.length;t++)i(t)},i=function(e){$('[data-section="'+e+'"] .flash .copy').click(function(o){t=e,n.setSectionTarget(),n.render(),dropdown.remove()})};return n.render=function(){var n=$('[data-section="'+t+'"] iframe')[0],o=$('[data-section="'+e+'"] iframe')[0],i=n.contentWindow.document.location.href;o.contentWindow.document.location.href=i},n.setSectionTarget=function(){e=1===t?2:1},n}(),dropdown=function(){var t={};t.toggle=function(n,o){$(n+" .dropdown").forEach(function(n){var i=n.previousSibling.previousSibling;i.addEventListener("click",function(n){var a=$("body")[0].getAttribute("data-dropdown"),r=$("body")[0].getAttribute("data-bar"),c=i.parentNode.getAttribute("class"),u=c.split(" ")[0];a?(t.remove(),(a!=u||r!=o)&&e(u,o)):e(u,o)})})},t.eventRemove=function(){$(".bar .hide .button").click(function(e){t.remove()}),$(".bar .show .button").click(function(e){t.remove()}),$(".bar .url .button-refresh").click(function(e){t.remove()}),$(".bar .left").click(function(e){t.remove()})},t.remove=function(){$("body")[0].removeAttribute("data-dropdown"),$("body")[0].removeAttribute("data-bar")};var e=function(t,e){$("body")[0].setAttribute("data-dropdown",t),$("body")[0].setAttribute("data-bar",e)};return t}(),dropdowns=function(){var t={};return t.toggle=function(){for(var t=1;t<url.length;t++)dropdown.toggle('[data-section="'+t+'"]',t)},t}(),Error=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.onError(e)},t.onError=function(e){var n=$('[data-section="'+e+'"] iframe')[0].contentWindow.document.querySelector(".message-is-alert");n&&(n.remove(),t.renderMessage(),setTimeout(t.removeMessage,4e3))},t.renderMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-error')[0].classList.add("active")},t.removeMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-error')[0].classList.remove("active")},t}(),exit=function(){var t={};t.init=function(){e()};var e=function(){n("1"),n("2")},n=function(t){$('[data-section="'+t+'"] li.exit').click(function(e){var n=$('[data-section="'+t+'"] iframe')[0].contentWindow.document.location.href;2==e.which?(e.preventDefault(),o(n)):i(n)})},o=function(t){var e=window.open(t,"_blank");e.focus()},i=function(t){window.location.href=t};return t}(),flip=function(){var t={};t.init=function(){e()};var e=function(){$(".bar .flip").click(function(t){n(),dropdown.remove()})},n=function(){"true"!=$("body")[0].getAttribute("data-flip")?$("body")[0].setAttribute("data-flip","true"):$("body")[0].setAttribute("data-flip","false")};return t}(),Free=function(){var t={};t.init=function(){e()};var e=function(){for(var t=1;t<url.length;t++)n(t)},n=function(e){$('[data-section="'+e+'"] .free').click(function(e){$("body")[0].setAttribute("data-free",""),t.style(),dropdown.remove()}),$(".dfw-return").click(function(e){$("body")[0].removeAttribute("data-free"),t.removeStyle()})};return t.style=function(){for(var t=0;t<$('[data-type="panel"] iframe').length;t++){var e=$('[data-type="panel"] iframe')[t].contentWindow.document.querySelector(".splitview-free");if(e)e.innerHTML=".topbar { display: none; } .app { padding-top: 0; }";else{var n=document.createElement("style");n.className="splitview-free";var o=$('[data-type="panel"] iframe')[t].contentWindow.document.querySelector("body").appendChild(n);o.innerHTML=".topbar { display: none; } .app { padding-top: 0; }"}}},t.removeStyle=function(){for(var t=0;t<$('[data-type="panel"] iframe').length;t++){var e=$('[data-type="panel"] iframe')[t].contentWindow.document.querySelector(".splitview-free");e&&e.remove()}},t}(),iframe=function(){var t={};return t.render=function(t,e){var n=document.createElement("iframe");return n.src=e,$(t+" .iframe")[0].appendChild(n),n},t}(),iframes=function(){var t={};return t.render=function(){for(var t=1;t<url.length;t++)iframe.render('[data-section="'+t+'"]',url[t])},t}(),InputClick=function(){var t,e={},n=!1;return e.init=function(){for(var t=1;t<url.length;t++)e.event(t)},e.event=function(t){e.eventClick(t),e.eventBlur(t),e.eventEscape(t)},e.eventClick=function(o){$('[data-section="'+o+'"] .input input').click(function(i){t=o,e.addAttribute(),0==n&&this[0].select(),n=!0})},e.eventBlur=function(n){t=n,$('[data-section="'+n+'"] .input input')[0].onblur=e.setBlur},e.setBlur=function(){window.getSelection().removeAllRanges(),n=!1},e.eventEscape=function(n){$('[data-section="'+n+'"] .url input').keyup(function(o){27==event.keyCode&&(t=n,window.getSelection().removeAllRanges(),e.deleteAttribute(n))})},e.addAttribute=function(){$('[data-section="'+t+'"]')[0].setAttribute("data-input","")},e.deleteAttribute=function(t){$('[data-section="'+t+'"]')[0].removeAttribute("data-input")},e}(),InputEnter=function(){var t,e,n={};return n.init=function(){for(var t=1;t<url.length;t++)n.event(t)},n.event=function(e){$('[data-section="'+e+'"] .url input').keypress(function(o){13==event.keyCode&&(t=e,n.setValue(),n.action(),InputClick.deleteAttribute(e))})},n.setValue=function(){e=$('[data-section="'+t+'"] .url input')[0].value},n.action=function(){$('[data-section="'+t+'"] iframe')[0].setAttribute("src",e)},n}(),InputHover=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(t){$('[data-section="'+t+'"] .url').mouseover(function(e){var n=$('[data-section="'+t+'"] .url input')[0].value;$('[data-section="'+t+'"] .address')[0].innerHTML=n,$('[data-section="'+t+'"]')[0].setAttribute("data-address","")}),$('[data-section="'+t+'"] .url').mouseout(function(e){$('[data-section="'+t+'"]')[0].removeAttribute("data-address")})},t}(),Refresh=function(){var t,e={};return e.init=function(){for(var t=1;t<url.length;t++)e.event(t)},e.event=function(n){$('[data-section="'+n+'"] .refresh').click(function(o){t=n,e.action(t),dropdown.remove()})},e.action=function(t){$('[data-section="'+t+'"] iframe')[0].contentWindow.location.reload()},e}(),Save=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(e){t.onSave(e)},t.onSave=function(e){var n=$('[data-section="'+e+'"] iframe')[0].contentWindow.document.querySelector(".message-is-notice");n?panel_state="saved":(panel_refreshed=!1,panel_state="closed"),"saved"===panel_state&&0==panel_refreshed&&(n.remove(),t.renderMessage(),Refresh.action(t.flip(e)),panel_refreshed=!0,autosync[e]===!0&&Sync.action(e),setTimeout(t.removeMessage,4e3))},t.renderMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-saved')[0].classList.add("active")},t.removeMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-saved')[0].classList.remove("active")},t.flip=function(t){return 1===t?2:1},t}(),Screen=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(t){$('[data-section="'+t+'"] .screen .button').click(function(e){if($('[data-dropdown="screen"]')){var n=$('[data-section="'+t+'"]')[0].offsetWidth;$('[data-section="'+t+'"] .screen input')[0].value=n}})},t}(),setup=function(){var t={};return t.init=function(e){data=e,t.urls(),t.memory()},t.urls=function(){var t=""!=data.page_slug?data.page_slug:"home";url[1]=data.root_url+"/"+action.getOption("panel","panel")+"/pages/"+t+"/edit",url[2]=data.root_url+"/"+data.page_slug},t.memory=function(){data.hasOwnProperty("memory")||(data.memory=!0)},t}(),Show=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(t){$('[data-section="'+t+'"] .show .button').click(function(e){InputClick.deleteAttribute(t)})},t}(),SyncPanel=function(){var t,e,n,o,i,a,r,c,u={};return u.action=function(t,e){r=t,i=e,a=u.flip(i),u.sync()},u.sync=function(){u.setUrlIframe(),u.setUrlPages(),u.setUrlNoPages(),u.setUrlNoParts(),u.setSiteUrl(),u.renderUrl()},u.setUrlPages=function(){e=data.root_url+"/"+action.getOption("panel","panel")+"/pages"},u.setUrlNoPages=function(){n=t.replace(e,"")},u.setUrlIframe=function(){t=$('[data-section="'+i+'"] iframe')[0].contentWindow.location.href},u.setUrlNoParts=function(){var t=n.split("/file/")[0];t=u.removeLast("/edit",t),t=u.removeLast("/files",t),t=u.removeLast("/subpages",t),o=t},u.setSiteUrl=function(){c=data.root_url+o},u.removeLast=function(t,e){return str=e.slice(-t.length),str===t&&(e=e.slice(0,-t.length)),e},u.renderUrl=function(){$('[data-section="'+a+'"] iframe')[0].contentWindow.location.href=c},u.flip=function(t){return 1===t?2:1},u}(),SiteSync=function(){var t,e,n,o,i,a={},r="";a.action=function(n,o){r=n,t=o,e=d(t),i=f(),c()};var c=function(){if(i){s(),u();var t=$('[data-section="'+e+'"] iframe')[0];t.contentWindow.document.location.href=n}},u=function(){n=data.root_url+"/"+action.getOption("panel","panel")+"/pages/"+o+"/edit"},s=function(){o=i.getAttribute("data-splitview-id")},d=function(t){return 1===t?2:1},f=function(){var e=document.querySelector('[data-section="'+t+'"] iframe'),n=e.contentWindow.document.querySelector(".splitview-data");return n};return a}(),Sync=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(e){$('[data-section="'+e+'"] .sync').click(function(n){t.action(e),dropdown.remove()})},t.action=function(e){var n=t.setTypes();t.cases(e,n)},t.setTypes=function(){var t=[];return t[1]=$('[data-section="1"][data-type]')[0].getAttribute("data-type"),t[2]=$('[data-section="2"][data-type]')[0].getAttribute("data-type"),t},t.cases=function(t,e){"panel"===e[t]?SyncPanel.action(e[t],t):"site"===e[t]&&SiteSync.action(e[t],t)},t}(),view=function(){var t={};t.init=function(){e()};var e=function(){buttonView("section1"),buttonView("section2"),buttonView("columns"),buttonView("rows")};return buttonView=function(e){$(".dropdown li."+e).click(function(n){t.setView(e),Width.resetWidth(1),Width.resetWidth(2),dropdown.remove()})},t.setView=function(t){$("body")[0].setAttribute("data-view",t),mem.setLocal("view",t)},t}(),Width=function(){var t={},e=[];e[0]=[],e[1]=[];var n=[];return n[0]=[],n[1]=[],t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(o){$('[data-section="'+o+'"] .screen input').click(function(e){t.action(this,o)}),$('[data-section="'+o+'"] .screen input').keydown(function(e){t.action(this,o)}),$('[data-section="'+o+'"] .screen input').keyup(function(e){t.action(this,o)}),$('[data-section="'+o+'"] .screen input').wheel(function(e){t.action(this,o)}),$('[data-section="'+o+'"] .screen .button').click(function(i){e[o]&&0!==e[o].length||t.setWidthByBrowser(o),t.renderWidth(o,e[o],n[o]),$('[data-section="'+o+'"] .screen input').focus()}),$('[data-section="'+o+'"] .screen select').change(function(e){t.setUnitByInput(o),t.setWidthByInput(o),t.changeWidth(o)}),$('[data-section="'+o+'"] .screen input').keypress(function(t){13==event.keyCode&&dropdown.remove()}),$('[data-section="'+o+'"] [data-width="320"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="480"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="640"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="800"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="1024"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="1140"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="25"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="33"]').click(function(e){t.renderInputByClick(o,this)}),$('[data-section="'+o+'"] [data-width="50"]').click(function(e){t.renderInputByClick(o,this)})},t.action=function(e,n){e[0].value;t.setUnitByInput(n),t.setWidthByInput(n),t.changeWidth(n)},t.renderInputByClick=function(o,i){var a=i[0].getAttribute("data-width"),r=i[0].getAttribute("data-unit");e[o]=a,n[o]=r,t.renderUnit(o,r),t.renderWidth(o,a),t.changeWidth(o),dropdown.remove()},t.setUnitByInput=function(t){n[t]=$('[data-section="'+t+'"] .screen select')[0].value},t.setWidthByInput=function(t){e[t]=$('[data-section="'+t+'"] .screen input')[0].value},t.setWidthByBrowser=function(t){e[t]=$('[data-section="'+t+'"]')[0].offsetWidth},t.renderUnit=function(t,e){$('[data-section="'+t+'"] .screen select')[0].value=e},t.renderWidth=function(t,e){$('[data-section="'+t+'"] .screen input')[0].value=e},t.changeWidth=function(o){$('[data-section="'+o+'"]')[0].style.flexGrow="0",$('[data-section="'+t.flip(o)+'"]')[0].style.flexGrow="1",$('[data-section="'+t.flip(o)+'"]')[0].style.width="0",$('[data-section="'+o+'"]')[0].style.width=e[o]+n[o],t.resetActive(),t.renderActive(o)},t.resetWidth=function(t){$('[data-section="'+t+'"]')[0].style.flexGrow="1",$('[data-section="'+t+'"]')[0].style.width="auto"},t.renderActive=function(t){var e=$('[data-section="'+t+'"] .screen .size'),n=$('[data-section="'+t+'"] .screen select')[0],o=$('[data-section="'+t+'"] .screen input')[0];for(i=0;i<e.length;++i){var a=e[i].getAttribute("data-unit"),r=e[i].getAttribute("data-width");a==n.value&&r==o.value&&e[i].classList.add("active")}},t.resetActive=function(){var t=$(".screen .size");for(i=0;i<t.length;++i)t[i].classList.remove("active")},t.flip=function(t){return 1===t?2:1},t}(),Zoom=function(){var t={};return t.style=function(t,e,n){var o=$('[data-section="'+t+'"] iframe')[0].contentWindow.document.querySelector(".splitview-zoom");if(o)o.innerHTML="html { transform: scale("+e+"); transform-origin: top left; width: "+n+"%; }";else{var i=document.createElement("style");i.className="splitview-zoom";var a=$('[data-section="'+t+'"] iframe')[0].contentWindow.document.querySelector("body").appendChild(i);a.innerHTML="html { transform: scale("+e+"); transform-origin: top left; width: "+n+"%; }"}},t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(e){$('[data-section="'+e+'"] .zoom .button').click(function(n){t.focus(e)}),$('[data-section="'+e+'"] .zoom-custom input').keypress(function(t){13==event.keyCode&&dropdown.remove()}),$('[data-section="'+e+'"] .zoom-custom input').wheel(function(n){t.action(e)}),$('[data-section="'+e+'"] .zoom-custom input').keydown(function(n){t.action(e)}),$('[data-section="'+e+'"] .zoom-custom input').keyup(function(n){t.action(e)}),$('[data-section="'+e+'"] .zoom-custom input').click(function(n){t.action(e)}),$('[data-section="'+e+'"] .zoom-reset').click(function(n){t.reset(e),t.action(e),t.focus(e)}),$('[data-section="'+e+'"] .zoom-plus').click(function(n){t.changePlus(e),t.action(e),t.focus(e)}),$('[data-section="'+e+'"] .zoom-minus').click(function(n){t.changeMinus(e),t.action(e),t.focus(e)})},t.focus=function(t){$('[data-section="'+t+'"] .zoom-custom input').focus()},t.action=function(e){var n=(t.currentValue(e),parseFloat(t.currentValue(e)).toFixed(1));n=parseFloat(n);var o=t.currentPercentage(n),i=t.magicNumber(o),a=t.flippedPercentage(i);t.style(e,n,a)},t.reset=function(t){$('[data-section="'+t+'"] .zoom-custom input')[0].value=1},t.currentValue=function(t){return $('[data-section="'+t+'"] .zoom-custom input')[0].value},t.currentPercentage=function(t){return 100*t},t.magicNumber=function(t){return 100/t},t.flippedPercentage=function(t){return 100*t},t.changePlus=function(e){var n=parseFloat(t.currentValue(e)).toFixed(1);n=parseFloat(n);var o=n+.1,i=parseFloat(o.toFixed(1));$('[data-section="'+e+'"] .zoom-custom input')[0].value=i},t.changeMinus=function(e){var n=parseFloat(t.currentValue(e)).toFixed(1);n=parseFloat(n);var o=n-.1;if(o>=0){var i=parseFloat(o.toFixed(1));$('[data-section="'+e+'"] .zoom-custom input')[0].value=i}},t}(),blur=function(){var t={};return t.render=function(t){$(t).blur()},t}(),focus=function(){var t={};return t.rootOnLoad=function(e){iframe=$(e+" iframe")[0],iframe.onload=function(){iframe_count++,2==iframe_count&&(t.root(),messages.hide(),timeloop.events())}},t.rootsOnLoad=function(){for(var e=1;e<url.length;e++)t.rootOnLoad('[data-section="'+e+'"]')},t.render=function(t){$(t).focus()},t.root=function(){blur.render('[data-section="1"] iframe'),blur.render('[data-section="2"] iframe'),focus.render(".splitview")},t}(),$=function(t,e){e=e||document;var n=Array.prototype.slice.call(e.querySelectorAll(t));return n.click=function(t){n.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.change=function(t){n.forEach(function(e){e.addEventListener("change",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.mouseover=function(t){n.forEach(function(e){e.addEventListener("mouseenter",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.wheel=function(t){n.forEach(function(e){e.addEventListener("wheel",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.mouseout=function(t){n.forEach(function(e){e.addEventListener("mouseleave",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.keypress=function(t){n.forEach(function(e){e.addEventListener("keypress",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.keyup=function(t){n.forEach(function(e){e.addEventListener("keyup",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.keydown=function(t){n.forEach(function(e){e.addEventListener("keydown",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.show=function(t){n.forEach(function(t){t.classList.add("active")})},n.hide=function(t){n.forEach(function(t){t.classList.remove("active")})},n.blur=function(t){n.forEach(function(t){t.blur()})},n.focus=function(t){n.forEach(function(t){t.focus()})},n.toggle=function(t){n.forEach(function(t){t.classList.toggle("active")})},n.hasClass=function(t){n.forEach(function(e){return e.classList.contains(t)?!0:void 0})},n},message=function(){var t={};return t.hide=function(t){var e=document.createElement("style"),n=$(t+" iframe")[0].contentWindow.document.querySelector("body").appendChild(e);n.innerHTML=".message { display: none; }"},t}(),messages=function(){var t={};return t.hide=function(){for(var t=1;t<url.length;t++)message.hide('[data-section="'+t+'"]')},t}(),section=function(){var t={};t.update=function(){for(var t=1;t<url.length;t++)e('[data-section="'+t+'"]',url[t],t)};var e=function(t,e,i){n(t,e,i),o(t,e,i)},n=function(t,e,n){var o=$(t+" iframe")[0].contentWindow.document.querySelector(".splitview-data");if(o){var i=$(t)[0].getAttribute("data-type");"site"!==i&&$(t)[0].setAttribute("data-type","site")}},o=function(t,e,n){var o=$(t+" iframe")[0].contentWindow.document.querySelector("title");if(o&&" | Panel"==o.innerHTML.substr(-8)){var i=$(t)[0].getAttribute("data-type");"panel"!==i&&$(t)[0].setAttribute("data-type","panel")}};return t}(),timeloop=function(){var t={};return t.events=function(){section.update(),addresses.update(),Save.init(),Error.init(),setTimeout(t.events,200)},t}();