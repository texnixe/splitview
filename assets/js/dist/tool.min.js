function hide(t){$(t).hide()}function show(t){$(t).show()}function elementExists(t){return $(t).length?!0:void 0}var action=function(){var t={};return t.is_json=function(t){try{JSON.parse(t)}catch(n){return!1}return!0},t.getOption=function(t,n){var e="";return e=data.hasOwnProperty(t)?data[t]:n},t.debugData=function(){data.debug===!0&&(console.log("Options JS:"),console.log(data))},t}(),address=function(){var t={};return t.render=function(t,n){$(t+" .url input")[0].value=n},t.update=function(n,e,i){var o=$(n+" iframe")[0].contentWindow.location.href;o!=e&&(t.render(n,o),url[i]=o)},t}(),addresses=function(){var t={};return t.render=function(){for(var t=1;t<url.length;t++)address.render('[data-section="'+t+'"]',url[t])},t.update=function(){for(var t=1;t<url.length;t++)address.update('[data-section="'+t+'"]',url[t],t)},t}(),mem=function(){var t={};return t.init=function(){mem.setMemory(),mem.loadMemory()},t.setLocal=function(t,n){memory[t]=n;var e=JSON.stringify(memory);localStorage.setItem("splitview.memory",e)},t.setMemory=function(){if(localStorage.getItem("splitview.memory")){var t=localStorage.getItem("splitview.memory");action.is_json(t)&&(memory=JSON.parse(t))}},t.getMemory=function(t,n){var e="";return e=memory&&memory.hasOwnProperty(t)?memory[t]:n},t.loadMemory=function(){data.memory===!0?view.setView(mem.getMemory("view","columns")):view.setView(action.getOption("view","columns"))},t}(),data={},iframe_count=0,url=[],panel_state,panel_refreshed=!0,autosync=[];autosync[1]=!1,autosync[2]=!1;var memory={},splitview=function(){var t={};return t.init=function(t){setup.init(t),action.debugData(),iframes.render(),addresses.render(),dropdowns.toggle(),dropdown.eventRemove(),focus.rootsOnLoad(),mem.init(),copy.init(),flip.init(),InputEnter.init(),InputClick.init(),InputHover.init(),Show.init(),Sync.init(),Refresh.init(),AutoSync.init(),Zoom.init(),view.init(),exit.init(),Screen.init(),Width.init()},t}(),AutoSync=function(){var t={};return t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(t){$('[data-section="'+t+'"] .autosync').click(function(n){autosync[t]===!1?($('[data-section="'+t+'"]')[0].setAttribute("data-autosync",""),autosync[t]=!0):($('[data-section="'+t+'"]')[0].removeAttribute("data-autosync"),autosync[t]=!1),dropdown.remove()})},t}(),copy=function(){var t,n,e={};e.init=function(){i()};var i=function(){for(var t=1;t<url.length;t++)o(t)},o=function(n){$('[data-section="'+n+'"] .flash .copy').click(function(i){t=n,e.setSectionTarget(),e.render(),dropdown.remove()})};return e.render=function(){var e=$('[data-section="'+t+'"] iframe')[0],i=$('[data-section="'+n+'"] iframe')[0],o=e.contentWindow.document.location.href;i.contentWindow.document.location.href=o},e.setSectionTarget=function(){n=1===t?2:1},e}(),dropdown=function(){var t={};t.toggle=function(e,i){$(e+" .dropdown").forEach(function(e){var o=e.previousSibling.previousSibling;o.addEventListener("click",function(e){var a=$("body")[0].getAttribute("data-dropdown"),r=$("body")[0].getAttribute("data-bar"),c=o.parentNode.getAttribute("class"),u=c.split(" ")[0];a?(t.remove(),(a!=u||r!=i)&&n(u,i)):n(u,i)})})},t.eventRemove=function(){$(".bar .hide .button").click(function(n){t.remove()}),$(".bar .show .button").click(function(n){t.remove()}),$(".bar .url .button-refresh").click(function(n){t.remove()}),$(".bar .left").click(function(n){t.remove()})},t.remove=function(){$("body")[0].removeAttribute("data-dropdown"),$("body")[0].removeAttribute("data-bar")};var n=function(t,n){$("body")[0].setAttribute("data-dropdown",t),$("body")[0].setAttribute("data-bar",n)};return t}(),dropdowns=function(){var t={};return t.toggle=function(){for(var t=1;t<url.length;t++)dropdown.toggle('[data-section="'+t+'"]',t)},t}(),Error=function(){var t={};return t.init=function(){for(var n=1;n<url.length;n++)t.onError(n)},t.onError=function(n){var e=$('[data-section="'+n+'"] iframe')[0].contentWindow.document.querySelector(".message-is-alert");e&&(e.remove(),t.renderMessage(),setTimeout(t.removeMessage,4e3))},t.renderMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-error')[0].classList.add("active")},t.removeMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-error')[0].classList.remove("active")},t}(),exit=function(){var t={};t.init=function(){n()};var n=function(){e("1"),e("2")},e=function(t){$('[data-section="'+t+'"] li.exit').click(function(n){var e=$('[data-section="'+t+'"] iframe')[0].contentWindow.document.location.href;2==n.which?(n.preventDefault(),i(e)):o(e)})},i=function(t){var n=window.open(t,"_blank");n.focus()},o=function(t){window.location.href=t};return t}(),flip=function(){var t={};t.init=function(){n()};var n=function(){$(".bar .flip").click(function(t){e(),dropdown.remove()})},e=function(){"true"!=$("body")[0].getAttribute("data-flip")?$("body")[0].setAttribute("data-flip","true"):$("body")[0].setAttribute("data-flip","false")};return t}(),iframe=function(){var t={};return t.render=function(t,n){var e=document.createElement("iframe");return e.src=n,$(t+" .iframe")[0].appendChild(e),e},t}(),iframes=function(){var t={};return t.render=function(){for(var t=1;t<url.length;t++)iframe.render('[data-section="'+t+'"]',url[t])},t}(),InputClick=function(){var t,n={},e=!1;return n.init=function(){for(var t=1;t<url.length;t++)n.event(t)},n.event=function(t){n.eventClick(t),n.eventBlur(t),n.eventEscape(t)},n.eventClick=function(i){$('[data-section="'+i+'"] .input input').click(function(o){t=i,n.addAttribute(),0==e&&this[0].select(),e=!0})},n.eventBlur=function(e){t=e,$('[data-section="'+e+'"] .input input')[0].onblur=n.setBlur},n.setBlur=function(){window.getSelection().removeAllRanges(),e=!1},n.eventEscape=function(e){$('[data-section="'+e+'"] .url input').keyup(function(i){27==event.keyCode&&(t=e,window.getSelection().removeAllRanges(),n.deleteAttribute(e))})},n.addAttribute=function(){$('[data-section="'+t+'"]')[0].setAttribute("data-input","")},n.deleteAttribute=function(t){$('[data-section="'+t+'"]')[0].removeAttribute("data-input")},n}(),InputEnter=function(){var t,n,e={};return e.init=function(){for(var t=1;t<url.length;t++)e.event(t)},e.event=function(n){$('[data-section="'+n+'"] .url input').keypress(function(i){13==event.keyCode&&(t=n,e.setValue(),e.action(),InputClick.deleteAttribute(n))})},e.setValue=function(){n=$('[data-section="'+t+'"] .url input')[0].value},e.action=function(){$('[data-section="'+t+'"] iframe')[0].setAttribute("src",n)},e}(),InputHover=function(){var t={};return t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(t){$('[data-section="'+t+'"] .url').mouseover(function(n){var e=$('[data-section="'+t+'"] .url input')[0].value;$('[data-section="'+t+'"] .address')[0].innerHTML=e,$('[data-section="'+t+'"]')[0].setAttribute("data-address","")}),$('[data-section="'+t+'"] .url').mouseout(function(n){$('[data-section="'+t+'"]')[0].removeAttribute("data-address")})},t}(),Refresh=function(){var t,n={};return n.init=function(){for(var t=1;t<url.length;t++)n.event(t)},n.event=function(e){$('[data-section="'+e+'"] .refresh').click(function(i){t=e,n.action(t),dropdown.remove()})},n.action=function(t){$('[data-section="'+t+'"] iframe')[0].contentWindow.location.reload()},n}(),Save=function(){var t={};return t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(n){t.onSave(n)},t.onSave=function(n){var e=$('[data-section="'+n+'"] iframe')[0].contentWindow.document.querySelector(".message-is-notice");e?panel_state="saved":(panel_refreshed=!1,panel_state="closed"),"saved"===panel_state&&0==panel_refreshed&&(e.remove(),t.renderMessage(),Refresh.action(t.flip(n)),panel_refreshed=!0,autosync[n]===!0&&Sync.action(n),setTimeout(t.removeMessage,4e3))},t.renderMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-saved')[0].classList.add("active")},t.removeMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-saved')[0].classList.remove("active")},t.flip=function(t){return 1===t?2:1},t}(),Screen=function(){var t={};return t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(t){$('[data-section="'+t+'"] .screen .button').click(function(n){if($('[data-dropdown="screen"]')){var e=$('[data-section="'+t+'"]')[0].offsetWidth;$('[data-section="'+t+'"] .screen input')[0].value=e}})},t}(),setup=function(){var t={};return t.init=function(t){data=t;var n=""!=data.page_slug?data.page_slug:"home";url[1]=data.root_url+"/"+action.getOption("panel","panel")+"/pages/"+n+"/edit",url[2]=data.root_url+"/"+data.page_slug},t}(),Show=function(){var t={};return t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(t){$('[data-section="'+t+'"] .show .button').click(function(n){InputClick.deleteAttribute(t)})},t}(),SyncPanel=function(){var t,n,e,i,o,a,r,c,u={};return u.action=function(t,n){r=t,o=n,a=u.flip(o),u.sync()},u.sync=function(){u.setUrlIframe(),u.setUrlPages(),u.setUrlNoPages(),u.setUrlNoParts(),u.setSiteUrl(),u.renderUrl()},u.setUrlPages=function(){n=data.root_url+"/"+action.getOption("panel","panel")+"/pages"},u.setUrlNoPages=function(){e=t.replace(n,"")},u.setUrlIframe=function(){t=$('[data-section="'+o+'"] iframe')[0].contentWindow.location.href},u.setUrlNoParts=function(){var t=e.split("/file/")[0];t=u.removeLast("/edit",t),t=u.removeLast("/files",t),t=u.removeLast("/subpages",t),i=t},u.setSiteUrl=function(){c=data.root_url+i},u.removeLast=function(t,n){return str=n.slice(-t.length),str===t&&(n=n.slice(0,-t.length)),n},u.renderUrl=function(){$('[data-section="'+a+'"] iframe')[0].contentWindow.location.href=c},u.flip=function(t){return 1===t?2:1},u}(),SiteSync=function(){var t,n,e,i,o,a={},r="";a.action=function(e,i){r=e,t=i,n=d(t),o=f(),c()};var c=function(){if(o){s(),u();var t=$('[data-section="'+n+'"] iframe')[0];t.contentWindow.document.location.href=e}},u=function(){e=data.root_url+"/"+action.getOption("panel","panel")+"/pages/"+i+"/edit"},s=function(){i=o.getAttribute("data-splitview-id")},d=function(t){return 1===t?2:1},f=function(){var n=document.querySelector('[data-section="'+t+'"] iframe'),e=n.contentWindow.document.querySelector(".splitview-data");return e};return a}(),Sync=function(){var t={};return t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(n){$('[data-section="'+n+'"] .sync').click(function(e){t.action(n),dropdown.remove()})},t.action=function(n){var e=t.setTypes();t.cases(n,e)},t.setTypes=function(){var t=[];return t[1]=$('[data-section="1"][data-type]')[0].getAttribute("data-type"),t[2]=$('[data-section="2"][data-type]')[0].getAttribute("data-type"),t},t.cases=function(t,n){"panel"===n[t]?SyncPanel.action(n[t],t):"site"===n[t]&&SiteSync.action(n[t],t)},t}(),view=function(){var t={};t.init=function(){n()};var n=function(){buttonView("section1"),buttonView("section2"),buttonView("columns"),buttonView("rows")};return buttonView=function(n){$(".dropdown li."+n).click(function(e){t.setView(n),Width.resetWidth(1),Width.resetWidth(2),dropdown.remove()})},t.setView=function(t){$("body")[0].setAttribute("data-view",t),mem.setLocal("view",t)},t}(),Width=function(){var t={},n=[];n[0]=[],n[1]=[];var e=[];return e[0]=[],e[1]=[],t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(i){$('[data-section="'+i+'"] .screen input').click(function(n){t.action(this,i)}),$('[data-section="'+i+'"] .screen input').keydown(function(n){t.action(this,i)}),$('[data-section="'+i+'"] .screen input').keyup(function(n){t.action(this,i)}),$('[data-section="'+i+'"] .screen input').wheel(function(n){t.action(this,i)}),$('[data-section="'+i+'"] .screen .button').click(function(o){n[i]&&0!==n[i].length||t.setWidthByBrowser(i),t.renderWidth(i,n[i],e[i]),$('[data-section="'+i+'"] .screen input').focus()}),$('[data-section="'+i+'"] .screen select').change(function(n){t.setUnitByInput(i),t.setWidthByInput(i),t.changeWidth(i)}),$('[data-section="'+i+'"] .screen input').keypress(function(t){13==event.keyCode&&dropdown.remove()}),$('[data-section="'+i+'"] [data-width="320"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="480"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="640"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="800"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="1024"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="1140"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="25"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="33"]').click(function(n){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="50"]').click(function(n){t.renderInputByClick(i,this)})},t.action=function(n,e){n[0].value;t.setUnitByInput(e),t.setWidthByInput(e),t.changeWidth(e)},t.renderInputByClick=function(i,o){var a=o[0].getAttribute("data-width"),r=o[0].getAttribute("data-unit");n[i]=a,e[i]=r,t.renderUnit(i,r),t.renderWidth(i,a),t.changeWidth(i),dropdown.remove()},t.setUnitByInput=function(t){e[t]=$('[data-section="'+t+'"] .screen select')[0].value},t.setWidthByInput=function(t){n[t]=$('[data-section="'+t+'"] .screen input')[0].value},t.setWidthByBrowser=function(t){n[t]=$('[data-section="'+t+'"]')[0].offsetWidth},t.renderUnit=function(t,n){$('[data-section="'+t+'"] .screen select')[0].value=n},t.renderWidth=function(t,n){$('[data-section="'+t+'"] .screen input')[0].value=n},t.changeWidth=function(i){$('[data-section="'+i+'"]')[0].style.flexGrow="0",$('[data-section="'+t.flip(i)+'"]')[0].style.flexGrow="1",$('[data-section="'+t.flip(i)+'"]')[0].style.width="0",$('[data-section="'+i+'"]')[0].style.width=n[i]+e[i],t.resetActive(),t.renderActive(i)},t.resetWidth=function(t){$('[data-section="'+t+'"]')[0].style.flexGrow="1",$('[data-section="'+t+'"]')[0].style.width="auto"},t.renderActive=function(t){var n=$('[data-section="'+t+'"] .screen .size'),e=$('[data-section="'+t+'"] .screen select')[0],o=$('[data-section="'+t+'"] .screen input')[0];for(i=0;i<n.length;++i){var a=n[i].getAttribute("data-unit"),r=n[i].getAttribute("data-width");a==e.value&&r==o.value&&n[i].classList.add("active")}},t.resetActive=function(){var t=$(".screen .size");for(i=0;i<t.length;++i)t[i].classList.remove("active")},t.flip=function(t){return 1===t?2:1},t}(),Zoom=function(){var t={};return t.style=function(t,n,e){var i=$('[data-section="'+t+'"] iframe')[0].contentWindow.document.querySelector(".splitview-zoom");if(i)i.innerHTML="html { transform: scale("+n+"); transform-origin: top left; width: "+e+"%; }";else{var o=document.createElement("style");o.className="splitview-zoom";var a=$('[data-section="'+t+'"] iframe')[0].contentWindow.document.querySelector("body").appendChild(o);a.innerHTML="html { transform: scale("+n+"); transform-origin: top left; width: "+e+"%; }"}},t.init=function(){for(var n=1;n<url.length;n++)t.event(n)},t.event=function(n){$('[data-section="'+n+'"] .zoom .button').click(function(e){t.focus(n)}),$('[data-section="'+n+'"] .zoom-custom input').keypress(function(t){13==event.keyCode&&dropdown.remove()}),$('[data-section="'+n+'"] .zoom-custom input').wheel(function(e){t.action(n)}),$('[data-section="'+n+'"] .zoom-custom input').keydown(function(e){t.action(n)}),$('[data-section="'+n+'"] .zoom-custom input').keyup(function(e){t.action(n)}),$('[data-section="'+n+'"] .zoom-custom input').click(function(e){t.action(n)}),$('[data-section="'+n+'"] .zoom-reset').click(function(e){t.reset(n),t.action(n),t.focus(n)}),$('[data-section="'+n+'"] .zoom-plus').click(function(e){t.changePlus(n),t.action(n),t.focus(n)}),$('[data-section="'+n+'"] .zoom-minus').click(function(e){t.changeMinus(n),t.action(n),t.focus(n)})},t.focus=function(t){$('[data-section="'+t+'"] .zoom-custom input').focus()},t.action=function(n){var e=(t.currentValue(n),parseFloat(t.currentValue(n)).toFixed(1));e=parseFloat(e);var i=t.currentPercentage(e),o=t.magicNumber(i),a=t.flippedPercentage(o);t.style(n,e,a)},t.reset=function(t){$('[data-section="'+t+'"] .zoom-custom input')[0].value=1},t.currentValue=function(t){return $('[data-section="'+t+'"] .zoom-custom input')[0].value},t.currentPercentage=function(t){return 100*t},t.magicNumber=function(t){return 100/t},t.flippedPercentage=function(t){return 100*t},t.changePlus=function(n){var e=parseFloat(t.currentValue(n)).toFixed(1);e=parseFloat(e);var i=e+.1,o=parseFloat(i.toFixed(1));$('[data-section="'+n+'"] .zoom-custom input')[0].value=o},t.changeMinus=function(n){var e=parseFloat(t.currentValue(n)).toFixed(1);e=parseFloat(e);var i=e-.1;if(o>=0){var o=parseFloat(i.toFixed(1));$('[data-section="'+n+'"] .zoom-custom input')[0].value=o}},t}(),blur=function(){var t={};return t.render=function(t){$(t).blur()},t}(),focus=function(){var t={};return t.rootOnLoad=function(n){iframe=$(n+" iframe")[0],iframe.onload=function(){iframe_count++,2==iframe_count&&(t.root(),messages.hide(),timeloop.events())}},t.rootsOnLoad=function(){for(var n=1;n<url.length;n++)t.rootOnLoad('[data-section="'+n+'"]')},t.render=function(t){$(t).focus()},t.root=function(){blur.render('[data-section="1"] iframe'),blur.render('[data-section="2"] iframe'),focus.render(".splitview")},t}(),$=function(t,n){n=n||document;var e=Array.prototype.slice.call(n.querySelectorAll(t));return e.click=function(t){e.forEach(function(n){n.addEventListener("click",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.change=function(t){e.forEach(function(n){n.addEventListener("change",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.mouseover=function(t){e.forEach(function(n){n.addEventListener("mouseenter",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.wheel=function(t){e.forEach(function(n){n.addEventListener("wheel",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.mouseout=function(t){e.forEach(function(n){n.addEventListener("mouseleave",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.keypress=function(t){e.forEach(function(n){n.addEventListener("keypress",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.keyup=function(t){e.forEach(function(n){n.addEventListener("keyup",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.keydown=function(t){e.forEach(function(n){n.addEventListener("keydown",function(n){n.stopPropagation(),t.apply(e,[n])})})},e.show=function(t){e.forEach(function(t){t.classList.add("active")})},e.hide=function(t){e.forEach(function(t){t.classList.remove("active")})},e.blur=function(t){e.forEach(function(t){t.blur()})},e.focus=function(t){e.forEach(function(t){t.focus()})},e.toggle=function(t){e.forEach(function(t){t.classList.toggle("active")})},e.hasClass=function(t){e.forEach(function(n){return n.classList.contains(t)?!0:void 0})},e},message=function(){var t={};return t.hide=function(t){var n=document.createElement("style"),e=$(t+" iframe")[0].contentWindow.document.querySelector("body").appendChild(n);e.innerHTML=".message { display: none; }"},t}(),messages=function(){var t={};return t.hide=function(){for(var t=1;t<url.length;t++)message.hide('[data-section="'+t+'"]')},t}(),section=function(){var t={};t.update=function(){for(var t=1;t<url.length;t++)n('[data-section="'+t+'"]',url[t],t)};var n=function(t,n,o){e(t,n,o),i(t,n,o)},e=function(t,n,e){var i=$(t+" iframe")[0].contentWindow.document.querySelector(".splitview-data");if(i){var o=$(t)[0].getAttribute("data-type");"site"!==o&&$(t)[0].setAttribute("data-type","site")}},i=function(t,n,e){var i=$(t+" iframe")[0].contentWindow.document.querySelector("title");if(i&&" | Panel"==i.innerHTML.substr(-8)){var o=$(t)[0].getAttribute("data-type");"panel"!==o&&$(t)[0].setAttribute("data-type","panel")}};return t}(),timeloop=function(){var t={};return t.events=function(){section.update(),addresses.update(),Save.init(),Error.init(),setTimeout(t.events,200)},t}();