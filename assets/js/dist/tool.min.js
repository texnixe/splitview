function hide(t){$(t).hide()}function show(t){$(t).show()}function elementExists(t){return $(t).length?!0:void 0}var action=function(){var t={};return t.is_json=function(t){try{JSON.parse(t)}catch(e){return!1}return!0},t.getOption=function(t,e){var n="";return n=data.hasOwnProperty(t)?data[t]:e},t.debugData=function(){data.debug===!0&&(console.log("Options JS:"),console.log(data))},t}(),address=function(){var t={};return t.render=function(t,e){$(t+" .url input")[0].value=e},t.update=function(e,n,i){var o=$(e+" iframe")[0].contentWindow.location.href;o!=n&&(t.render(e,o),url[i]=o)},t}(),addresses=function(){var t={};return t.render=function(){for(var t=1;t<url.length;t++)address.render('[data-section="'+t+'"]',url[t])},t.update=function(){for(var t=1;t<url.length;t++)address.update('[data-section="'+t+'"]',url[t],t)},t}(),mem=function(){var t={};return t.init=function(){mem.setMemory(),mem.loadMemory()},t.setLocal=function(t,e){memory[t]=e;var n=JSON.stringify(memory);localStorage.setItem("splitview.memory",n)},t.setMemory=function(){if(localStorage.getItem("splitview.memory")){var t=localStorage.getItem("splitview.memory");action.is_json(t)&&(memory=JSON.parse(t))}},t.getMemory=function(t,e){var n="";return n=memory&&memory.hasOwnProperty(t)?memory[t]:e},t.loadMemory=function(){data.memory===!0?view.setView(mem.getMemory("view","columns")):view.setView(action.getOption("view","columns"))},t}(),data={},iframe_count=0,url=[],panel_state,panel_refreshed=!0,autosync=[];autosync[1]=!1,autosync[2]=!1;var memory={},splitview=function(){var t={};return t.init=function(t){setup.init(t),action.debugData(),iframes.render(),addresses.render(),dropdowns.toggle(),dropdown.eventRemove(),focus.rootsOnLoad(),mem.init(),copy.init(),flip.init(),InputEnter.init(),InputClick.init(),Show.init(),Sync.init(),Refresh.init(),AutoSync.init(),view.init(),exit.init(),Screen.init(),Width.init()},t}(),AutoSync=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(t){$('[data-section="'+t+'"] .autosync').click(function(e){autosync[t]===!1?($('[data-section="'+t+'"]')[0].setAttribute("data-autosync",""),autosync[t]=!0):($('[data-section="'+t+'"]')[0].removeAttribute("data-autosync"),autosync[t]=!1),dropdown.remove()})},t}(),copy=function(){var t,e,n={};n.init=function(){i()};var i=function(){for(var t=1;t<url.length;t++)o(t)},o=function(e){$('[data-section="'+e+'"] .flash .copy').click(function(i){t=e,n.setSectionTarget(),n.render(),dropdown.remove()})};return n.render=function(){var n=$('[data-section="'+t+'"] iframe')[0],i=$('[data-section="'+e+'"] iframe')[0],o=n.contentWindow.document.location.href;i.contentWindow.document.location.href=o},n.setSectionTarget=function(){e=1===t?2:1},n}(),dropdown=function(){var t={};t.toggle=function(n,i){$(n+" .dropdown").forEach(function(n){var o=n.previousSibling.previousSibling;o.addEventListener("click",function(n){var r=$("body")[0].getAttribute("data-dropdown"),a=$("body")[0].getAttribute("data-bar"),c=o.parentNode.getAttribute("class"),u=c.split(" ")[0];r?(t.remove(),(r!=u||a!=i)&&e(u,i)):e(u,i)})})},t.eventRemove=function(){$(".bar .hide .button").click(function(e){t.remove()}),$(".bar .show .button").click(function(e){t.remove()}),$(".bar .url .button-refresh").click(function(e){t.remove()}),$(".bar .left").click(function(e){t.remove()})},t.remove=function(){$("body")[0].removeAttribute("data-dropdown"),$("body")[0].removeAttribute("data-bar")};var e=function(t,e){$("body")[0].setAttribute("data-dropdown",t),$("body")[0].setAttribute("data-bar",e)};return t}(),dropdowns=function(){var t={};return t.toggle=function(){for(var t=1;t<url.length;t++)dropdown.toggle('[data-section="'+t+'"]',t)},t}(),Error=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.onError(e)},t.onError=function(e){var n=$('[data-section="'+e+'"] iframe')[0].contentWindow.document.querySelector(".message-is-alert");n&&(n.remove(),t.renderMessage(),setTimeout(t.removeMessage,4e3))},t.renderMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-error')[0].classList.add("active")},t.removeMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-error')[0].classList.remove("active")},t}(),exit=function(){var t={};t.init=function(){e()};var e=function(){n("1"),n("2")},n=function(t){$('[data-section="'+t+'"] li.exit').click(function(e){var n=$('[data-section="'+t+'"] iframe')[0].contentWindow.document.location.href;2==e.which?(e.preventDefault(),i(n)):o(n)})},i=function(t){var e=window.open(t,"_blank");e.focus()},o=function(t){window.location.href=t};return t}(),flip=function(){var t={};t.init=function(){e()};var e=function(){$(".bar .flip").click(function(t){n(),dropdown.remove()})},n=function(){"true"!=$("body")[0].getAttribute("data-flip")?$("body")[0].setAttribute("data-flip","true"):$("body")[0].setAttribute("data-flip","false")};return t}(),iframe=function(){var t={};return t.render=function(t,e){var n=document.createElement("iframe");return n.src=e,$(t+" .iframe")[0].appendChild(n),n},t}(),iframes=function(){var t={};return t.render=function(){for(var t=1;t<url.length;t++)iframe.render('[data-section="'+t+'"]',url[t])},t}(),InputClick=function(){var t,e={},n=!1;return e.init=function(){for(var t=1;t<url.length;t++)e.event(t)},e.event=function(t){e.eventClick(t),e.eventBlur(t),e.eventEscape(t)},e.eventClick=function(i){$('[data-section="'+i+'"] .input input').click(function(o){t=i,e.addAttribute(),0==n&&this[0].select(),n=!0})},e.eventBlur=function(n){t=n,$('[data-section="'+n+'"] .input input')[0].onblur=e.setBlur},e.setBlur=function(){window.getSelection().removeAllRanges(),n=!1},e.eventEscape=function(n){$('[data-section="'+n+'"] .url input').keyup(function(i){27==event.keyCode&&(t=n,window.getSelection().removeAllRanges(),e.deleteAttribute(n))})},e.addAttribute=function(){$('[data-section="'+t+'"]')[0].setAttribute("data-input","")},e.deleteAttribute=function(t){$('[data-section="'+t+'"]')[0].removeAttribute("data-input")},e}(),InputEnter=function(){var t,e,n={};return n.init=function(){for(var t=1;t<url.length;t++)n.event(t)},n.event=function(e){$('[data-section="'+e+'"] .url input').keypress(function(i){13==event.keyCode&&(t=e,n.setValue(),n.action(),InputClick.deleteAttribute(e))})},n.setValue=function(){e=$('[data-section="'+t+'"] .url input')[0].value},n.action=function(){$('[data-section="'+t+'"] iframe')[0].setAttribute("src",e)},n}(),Refresh=function(){var t,e={};return e.init=function(){for(var t=1;t<url.length;t++)e.event(t)},e.event=function(n){$('[data-section="'+n+'"] .refresh').click(function(i){t=n,e.action(t),dropdown.remove()})},e.action=function(t){$('[data-section="'+t+'"] iframe')[0].contentWindow.location.reload()},e}(),Save=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(e){t.onSave(e)},t.onSave=function(e){var n=$('[data-section="'+e+'"] iframe')[0].contentWindow.document.querySelector(".message-is-notice");n?panel_state="saved":(panel_refreshed=!1,panel_state="closed"),"saved"===panel_state&&0==panel_refreshed&&(n.remove(),t.renderMessage(),Refresh.action(t.flip(e)),panel_refreshed=!0,autosync[e]===!0&&Sync.action(e),setTimeout(t.removeMessage,4e3))},t.renderMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-saved')[0].classList.add("active")},t.removeMessage=function(){for(var t=1;t<url.length;t++)$('[data-section="'+t+'"] .message-saved')[0].classList.remove("active")},t.flip=function(t){return 1===t?2:1},t}(),Screen=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(t){$('[data-section="'+t+'"] .screen .button').click(function(e){if($('[data-dropdown="screen"]')){var n=$('[data-section="'+t+'"]')[0].offsetWidth;$('[data-section="'+t+'"] .screen input')[0].value=n}})},t}(),setup=function(){var t={};return t.init=function(t){data=t,url[1]=data.root_url+"/"+action.getOption("panel","panel")+"/pages/"+data.admin_slug+"/edit",url[2]=data.root_url+"/"+data.page_slug},t}(),Show=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(t){$('[data-section="'+t+'"] .show .button').click(function(e){InputClick.deleteAttribute(t)})},t}(),SyncPanel=function(){var t,e,n,i,o,r,a,c,u={};return u.action=function(t,e){a=t,o=e,r=u.flip(o),u.sync()},u.sync=function(){u.setUrlIframe(),u.setUrlPages(),u.setUrlNoPages(),u.setUrlNoParts(),u.setSiteUrl(),u.renderUrl()},u.setUrlPages=function(){e=data.root_url+"/"+action.getOption("panel","panel")+"/pages"},u.setUrlNoPages=function(){n=t.replace(e,"")},u.setUrlIframe=function(){t=$('[data-section="'+o+'"] iframe')[0].contentWindow.location.href},u.setUrlNoParts=function(){var t=n.split("/file/")[0];t=u.removeLast("/edit",t),t=u.removeLast("/files",t),t=u.removeLast("/subpages",t),i=t},u.setSiteUrl=function(){c=data.root_url+i},u.removeLast=function(t,e){return str=e.slice(-t.length),str===t&&(e=e.slice(0,-t.length)),e},u.renderUrl=function(){$('[data-section="'+r+'"] iframe')[0].contentWindow.location.href=c},u.flip=function(t){return 1===t?2:1},u}(),SiteSync=function(){var t,e,n,i,o,r={},a="";r.action=function(n,i){a=n,t=i,e=d(t),o=f(),c()};var c=function(){if(o){s(),u();var t=$('[data-section="'+e+'"] iframe')[0];t.contentWindow.document.location.href=n}},u=function(){n=data.root_url+"/"+action.getOption("panel","panel")+"/pages/"+i+"/edit"},s=function(){i=o.getAttribute("data-splitview-id")},d=function(t){return 1===t?2:1},f=function(){var e=document.querySelector('[data-section="'+t+'"] iframe'),n=e.contentWindow.document.querySelector(".splitview-data");return n};return r}(),Sync=function(){var t={};return t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(e){$('[data-section="'+e+'"] .sync').click(function(n){t.action(e),dropdown.remove()})},t.action=function(e){var n=t.setTypes();t.cases(e,n)},t.setTypes=function(){var t=[];return t[1]=$('[data-section="1"][data-type]')[0].getAttribute("data-type"),t[2]=$('[data-section="2"][data-type]')[0].getAttribute("data-type"),t},t.cases=function(t,e){"panel"===e[t]?SyncPanel.action(e[t],t):"site"===e[t]&&SiteSync.action(e[t],t)},t}(),view=function(){var t={};t.init=function(){e()};var e=function(){buttonView("section1"),buttonView("section2"),buttonView("columns"),buttonView("rows")};return buttonView=function(e){$(".dropdown li."+e).click(function(n){t.setView(e),Width.resetWidth(1),Width.resetWidth(2),dropdown.remove()})},t.setView=function(t){$("body")[0].setAttribute("data-view",t),mem.setLocal("view",t)},t}(),Width=function(){var t={},e=[];e[0]=[],e[1]=[];var n=[];return n[0]=[],n[1]=[],t.init=function(){for(var e=1;e<url.length;e++)t.event(e)},t.event=function(i){$('[data-section="'+i+'"] .screen input').click(function(e){this[0].value;t.setUnitByInput(i),t.setWidthByInput(i),t.changeWidth(i)}),$('[data-section="'+i+'"] .screen input').keydown(function(e){this[0].value;t.setUnitByInput(i),t.setWidthByInput(i),t.changeWidth(i)}),$('[data-section="'+i+'"] .screen input').keyup(function(e){this[0].value;t.setUnitByInput(i),t.setWidthByInput(i),t.changeWidth(i)}),$('[data-section="'+i+'"] .screen .button').click(function(o){e[i]&&0!==e[i].length||t.setWidthByBrowser(i),t.renderWidth(i,e[i],n[i]),$('[data-section="'+i+'"] .screen input').focus()}),$('[data-section="'+i+'"] .screen select').change(function(e){t.setUnitByInput(i),t.setWidthByInput(i),t.changeWidth(i)}),$('[data-section="'+i+'"] .screen input').keypress(function(t){13==event.keyCode&&dropdown.remove()}),$('[data-section="'+i+'"] [data-width="320"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="480"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="640"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="800"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="1024"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="1140"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="25"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="33"]').click(function(e){t.renderInputByClick(i,this)}),$('[data-section="'+i+'"] [data-width="50"]').click(function(e){t.renderInputByClick(i,this)})},t.renderInputByClick=function(i,o){var r=o[0].getAttribute("data-width"),a=o[0].getAttribute("data-unit");e[i]=r,n[i]=a,t.renderUnit(i,a),t.renderWidth(i,r),t.changeWidth(i),dropdown.remove()},t.setUnitByInput=function(t){n[t]=$('[data-section="'+t+'"] .screen select')[0].value},t.setWidthByInput=function(t){e[t]=$('[data-section="'+t+'"] .screen input')[0].value},t.setWidthByBrowser=function(t){e[t]=$('[data-section="'+t+'"]')[0].offsetWidth},t.renderUnit=function(t,e){$('[data-section="'+t+'"] .screen select')[0].value=e},t.renderWidth=function(t,e){$('[data-section="'+t+'"] .screen input')[0].value=e},t.changeWidth=function(i){$('[data-section="'+i+'"]')[0].style.flexGrow="0",$('[data-section="'+t.flip(i)+'"]')[0].style.flexGrow="1",$('[data-section="'+t.flip(i)+'"]')[0].style.width="0",$('[data-section="'+i+'"]')[0].style.width=e[i]+n[i],t.resetActive(),t.renderActive(i)},t.resetWidth=function(t){$('[data-section="'+t+'"]')[0].style.flexGrow="1",$('[data-section="'+t+'"]')[0].style.width="auto"},t.renderActive=function(t){var e=$('[data-section="'+t+'"] .screen .size'),n=$('[data-section="'+t+'"] .screen select')[0],o=$('[data-section="'+t+'"] .screen input')[0];for(i=0;i<e.length;++i){var r=e[i].getAttribute("data-unit"),a=e[i].getAttribute("data-width");r==n.value&&a==o.value&&e[i].classList.add("active")}},t.resetActive=function(){var t=$(".screen .size");for(i=0;i<t.length;++i)t[i].classList.remove("active")},t.flip=function(t){return 1===t?2:1},t}(),blur=function(){var t={};return t.render=function(t){$(t).blur()},t}(),focus=function(){var t={};return t.rootOnLoad=function(e){iframe=$(e+" iframe")[0],iframe.onload=function(){iframe_count++,2==iframe_count&&(t.root(),messages.hide(),timeloop.events())}},t.rootsOnLoad=function(){for(var e=1;e<url.length;e++)t.rootOnLoad('[data-section="'+e+'"]')},t.render=function(t){$(t).focus()},t.root=function(){blur.render("section.panel iframe"),blur.render("section.site iframe"),focus.render(".splitview")},t}(),$=function(t,e){e=e||document;var n=Array.prototype.slice.call(e.querySelectorAll(t));return n.click=function(t){n.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.change=function(t){n.forEach(function(e){e.addEventListener("change",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.mouseover=function(t){n.forEach(function(e){e.addEventListener("mouseenter",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.mouseout=function(t){n.forEach(function(e){e.addEventListener("mouseleave",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.keypress=function(t){n.forEach(function(e){e.addEventListener("keypress",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.keyup=function(t){n.forEach(function(e){e.addEventListener("keyup",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.keydown=function(t){n.forEach(function(e){e.addEventListener("keydown",function(e){e.stopPropagation(),t.apply(n,[e])})})},n.show=function(t){n.forEach(function(t){t.classList.add("active")})},n.hide=function(t){n.forEach(function(t){t.classList.remove("active")})},n.blur=function(t){n.forEach(function(t){t.blur()})},n.focus=function(t){n.forEach(function(t){t.focus()})},n.toggle=function(t){n.forEach(function(t){t.classList.toggle("active")})},n.hasClass=function(t){n.forEach(function(e){return e.classList.contains(t)?!0:void 0})},n},message=function(){var t={};return t.hide=function(t){var e=document.createElement("style"),n=$(t+" iframe")[0].contentWindow.document.querySelector("body").appendChild(e);n.innerHTML=".message { display: none; }"},t}(),messages=function(){var t={};return t.hide=function(){for(var t=1;t<url.length;t++)message.hide('[data-section="'+t+'"]')},t}(),section=function(){var t={};t.update=function(){for(var t=1;t<url.length;t++)e('[data-section="'+t+'"]',url[t],t)};var e=function(t,e,o){n(t,e,o),i(t,e,o)},n=function(t,e,n){var i=$(t+" iframe")[0].contentWindow.document.querySelector(".splitview-data");if(i){var o=$(t)[0].getAttribute("data-type");"site"!==o&&$(t)[0].setAttribute("data-type","site")}},i=function(t,e,n){var i=$(t+" iframe")[0].contentWindow.document.querySelector("title");if(i&&" | Panel"==i.innerHTML.substr(-8)){var o=$(t)[0].getAttribute("data-type");"panel"!==o&&$(t)[0].setAttribute("data-type","panel")}};return t}(),timeloop=function(){var t={};return t.events=function(){section.update(),addresses.update(),Save.init(),Error.init(),setTimeout(t.events,200)},t}();